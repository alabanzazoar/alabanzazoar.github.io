<!DOCTYPE html>
    <head>
        <meta charset="utf-8">
        <title>ESTAR CONTIGO</title>
        <link rel="stylesheet" href="/CANTOS_ADORACION_ESTILOS/estarContigo.css">
        <link rel="icon" href="/LOGOS/logo.jpg" type="image/x-icon">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.3.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/html-to-image@1.10.0/dist/html-to-image.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>
        <p class="titulo1"></p>
        <p class="tono">Tonalidad:
        <button onclick="subirTono()"> +1 </button>
        <button onclick="subirMedioTono()"> +½ </button>
        <button onclick="bajarMedioTono()"> -½ </button>
        <button onclick="bajarTono()"> -1 </button>
        </p>
        <p class="tono">
            <button onclick="regresar()"> Regresar </button>
            <button onclick="generarPDF()"> Generar PDF </button>  
            <button onclick="generarImagen()"> Generar Imagen </button>        
        </p>
        <br>
        <div class="letra">
        <h1 class="titulo2">ESTAR CONTIGO</h1>
        <p class="titulo3">Job Gonzalez
Nota "<span id="nota1">G</span>"
Bits: 75 BPM</p>
        <p class="titulo4">                    INTRO: <spn class="color-azul"> <span id="nota2">F</span> <span id="nota3">A#</span> <span id="nota4">C</span> <span id="nota5">F</span> <span id="nota6">Dm</span> <span id="nota7">C</span> <span id="nota8">F</span>
        </spn></p>
<p class="titulo5"><span id="tit1">VERSO 1</span>                                                                                                  <span id="tit2">VERSO 2</span><br>
<span class="color-azul"><span id="nota9">F</span> <span id="nota10">F</span> <span id="nota11">A#</span> <span id="nota12">F</span></span>
<span id="texto1">Mil generaciones</span>  <span id="texto2">Si te ha perdonado y tienes salvación</span>
<span class="color-azul"><span id="nota13">A#</span> <span id="nota14">F</span> <span id="nota15">Dm</span> <span id="nota16">C</span> <span id="nota17">A#</span></span>
<span id="texto3">Se postran a adórale</span> <snap id="texto4">Cántale al Cordero que venció</snap>
<span class="color-azul"><span id="nota18">Dm</span> <span id="nota19">C</span> <span id="nota20">A#</span> <span id="nota21">F</span></span>
<span id="texto5">Le cantan al cordero que venció</span> <span id="texto6">Si te ha libertado,</span>
<span class="color-azul"><span id="nota22">F</span> <span id="nota23">A#</span><span id="nota24">F</span></span>
<span id="texto7">Los que nos precedieron</span> <span id="texto8">Su nombre ha puesto en ti</span>
<span class="color-azul"><span id="nota25">A#</span> <span id="nota26">F</span> <span id="nota27">Dm</span> <span id="nota28">C</span> <span id="nota29">A#</span></span>
<span id="texto9">Y los que en Él creerán</span> <span id="texto10">Cántale al cordero que Venció</span>
<span class="color-azul"><span id="nota30">Dm</span> <span id="nota31">C</span> <span id="nota32">A#</span> <span id="nota33">Dm</span> <span id="nota34">C</span> <span id="nota35">Gm</span></span>
<span id="texto11">Le cantarán a aquel que ya venció</span> <span id="texto12">Canataremos siempre amén</span>
</p>
<p class="titulo5"><span id="tit3">PRECORO</span>                                                                                                      <span id="tit4">CORO 2</span><br>
<span class="color-azul"><span id="nota36">A#</span> <span id="nota37">A#</span> <span id="nota38">C</span></span>
<span id="texto13">Tu nombre es más alto</span> <span id="texto14">Canta el pueblo al Rey Santo</span>
<span class="color-azul"><span id="nota39">C</span> <span id="nota40">F</span> <span id="nota41">Am</span><span id="signo1">-</span><span id="nota42">Dm</span></span>
<span id="texto15">Tu nombre es más grande</span> <span id="texto16">Soberano es Él, San to</span>
<span class="color-azul"><span id="nota43">Dm</span> <span id="nota44">C</span> <span id="nota45">A#</span> <span id="nota46">Gm</span> <span id="nota47">C</span></span>
<span id="texto17">Tu nombre, sobre todo es</span> <span id="texto18">Y por siempre es, Santo</span>
<span class="color-azul"><span id="nota48">Dm</span> <span id="nota49">C</span> <span id="nota50">F</span></span>
<span id="texto19">Sea tronos, dominios</span> <span id="texto20">Santo por siempre.</span>
<span class="color-azul"><span id="nota51">C</span></span>
<span id="texto21">Poderes, potestades</span> <span id="tit5" >PUENTE</span>
<span class="color-azul"><span id="nota52">Dm</span> <span id="nota53">C</span> <span id="nota54">A#</span> <span id="nota55">A#</span> <span id="nota56">C</span></span>
<span id="texto22">Tu nombre sobre todo es</span> <span id="texto23">Saaanto,</span>
<span class="color-azul"><span id="nota57">Am</span> <span id="nota58">Dm</span></span>
<span id="tit6">CORO 1</span> <span id="texto24">Saaanto,</span>
<span class="color-azul"><span id="nota59">A#</span> <span id="nota60">Dm</span> <span id="nota61">C</span> <span id="nota62">A#</span> <span id="nota63">C</span></span>
<span id="texto25">Claman ángeles sa - anto</span> <span id="texto26">Saaanto,</span>
<span class="color-azul"><span id="nota64">F</span> <span id="nota65">Am</span><span id="signo2">/</span><span id="nota66">Dm</span> <span id="nota67">C</span> <span id="nota68">F</span></span>
<span id="texto27">Claman la Creación S a n t o </span> <span id="texto28">Santo por siempre.</span>
<span class="color-azul"><span id="nota69">A#</span> <span id="nota70">C</span></span>
<span id="texto29">Exaltado Dios Santo</span>
<span class="color-azul"><span id="nota71">C</span> <span id="nota72">F</span></span>
<span id="texto30">Santo por siempre.</span>
</p>
<br>
<br>
<p class="nota">Nota: El intro lo hace el teclado.</p>
        <br>
        <br>
        <div class="pie-container">
            <img src="/LOGOS/logo2.jpg" alt="Logo">
            <p>MINISTERIOS ZOAR 2026</p>
        </div>
    </div>
    
    <script>
        const elementoNotas = Array.from(document.querySelectorAll('[id^="nota"]'));
        const notas = ['A','A#','B','C','C#','D','D#','E','F','F#','G','G#'];
        const notasAlteradas = ['Am','A#m','Bm','Cm','C#m','Dm','D#m','Em','Fm','F#m','Gm','G#m'];
        const mapNotas = Object.fromEntries(notas.map((n,i)=>[n,i]));
        const mapNotasAlt = Object.fromEntries(notasAlteradas.map((n,i)=>[n,i]));

        function cambiarSemitonos(delta){
            elementoNotas.forEach(el=>{
                if(!el) return;
                const actual = (el.textContent||'').trim();
                if(!actual) return;
                const esAlterada = actual.endsWith('m');
                const lista = esAlterada ? notasAlteradas : notas;
                const map = esAlterada ? mapNotasAlt : mapNotas;
                const idx = map[actual];
                if (idx === undefined) return;
                el.textContent = lista[(idx + delta + lista.length) % lista.length];
            });
        }

        function subirMedioTono(){ cambiarSemitonos(1); }
        function bajarMedioTono(){ cambiarSemitonos(-1); }
        function subirTono(){ cambiarSemitonos(2); }
        function bajarTono(){ cambiarSemitonos(-2); }

        function generarPDF(){
            const element = document.querySelector('.letra');
            const notaCancion = document.getElementById('nota1')?.textContent?.trim() || '';
            if(!element) return;
            const opt = {
                margin: 0.2,
                filename: 'ESTAR_CONTIGO_' + notaCancion + '.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 3 },
                jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().from(element).set(opt).save();
        }

        function generarImagen(){
            const element = document.querySelector('.letra');
            const notaCancion = document.getElementById('nota1')?.textContent?.trim() || '';
            if(!element){ console.error('Elemento .letra no encontrado'); return; }
            const tempContainer = document.createElement('div');
            tempContainer.style.width = '210mm';
            tempContainer.style.height = '297mm';
            tempContainer.style.position = 'absolute';
            tempContainer.style.top = '-9999px';
            tempContainer.style.left = '-9999px';
            tempContainer.style.backgroundColor = 'white';
            tempContainer.appendChild(element.cloneNode(true));
            document.body.appendChild(tempContainer);

            html2canvas(tempContainer, { scale: 3, backgroundColor: null }).then(canvas => {
                const link = document.createElement('a');
                link.href = canvas.toDataURL('image/png');
                link.download = 'ESTAR_CONTIGO_' + notaCancion + '.png';
                link.click();
            }).catch(error => {
                console.error('Error al generar la imagen:', error);
            }).finally(()=>{
                document.body.removeChild(tempContainer);
            });
        }

        function regresar(){ window.location.href = '/alabanza.html'; }
    </script>
    </body>
</html>